<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>
    <script>
        // #1. 타입 변환
        {
            let x = 10;

            // 명시적 타입 변환
            let str = x.toString();
            console.log('typeof str: ', typeof str, '\ntypeof x: ', typeof x);
        }
        {
            let x = 10;

            // 암묵적 타입 변환
            // 숫자 타입 x의 값을 바탕으로 새로운 문자열 타입의 값을 생성해 표현식을 평가한다.
            let str = x + '';
            
            console.log(typeof str, str);

            // 변수 x의 값이 변경된 것은 아니다.
            console.log(typeof x, x);
        }
        // #2. 암묵적 타입 변환
        {
            // 표현식이 모두 문자열 타입이어야 하는 컨텍스트
            console.log('10' + 2);
            console.log(`1 * 10 = ${1 * 10}`);

            // 표현식이 모두 숫자 타입어야 하는 컨텍스트
            console.log(5 * '10');

            // 표현식이 불리언 타입이어야 하는 컨텍스트
            console.log(!0);
            if(1) {
                console.log(1);
            }
        }
        // 2.1 문자열 타입으로 변환
        console.log('2.1 문자열 타입으로 변환');
        {
            console.log(1+'2');
            console.log(`1 + 1 = ${1 + 1}`);
            console.log(0 + '');
        }
        // 2.2 숫자 타입으로 변환
        {
            console.log(1 - '1');
            console.log(1 * '10');
            console.log(1 / 'one');

            console.log('1' > 0);

            // 문자열 타입
            console.log(+'');
            console.log(+'0');
            console.log(+'1');
            console.log(+'string');

            // 불리언 타입
            console.log(+true);
            console.log(+false);

            // null 타입
            console.log(+null);

            // 심볼 타입
            // console.log(+Symbol());
            // Uncaught TypeError: Cannot convert a Symbol value to a number

            // 객체 타입
            console.log(+{});
            console.log(+[]);
            console.log(+[10, 20]);
            console.log(+(function(){}));
        }
        // #2.3 불리언 타입으로 변환
        {
            if('') console.log(x);
            // if('')에서 ''는 false로 암묵적 변환이 되기 때문에
            // x라는 변수가 존재하지 않아도 if문이 실행되지 않으므로
            // 오류 발생하지 않음

            if('') console.log('1');
            if(true) console.log('2');
            if(0) console.log('3');
            if('str') console.log('4');
            if(null) console.log('5');
            `falsy values
            false, undifined, null, 0, -0, NaN, ''(빈문자열)
            `
            if (!false)     console.log(false + ' is falsy value');
            if (!undefined) console.log(undefined + ' is falsy value');
            if (!null)      console.log(null + ' is falsy value');
            if (!0)         console.log(0 + ' is falsy value');
            if (!NaN)       console.log(NaN + ' is falsy value');
            if (!'')        console.log('' + ' is falsy value');
            
        }
        {
            // 들어온 v값이 Falsy값이면 true, Truthy값이면 false를 반환
            function isFalsy(v) {
                return !v;
            }

            // 들어온 v값이 Falsy값이면 false, Truthy값이면 true를 반환
            function isTruthy(v) {
                return !!v;
            }

            console.log(isFalsy(false));
            console.log(isFalsy(undefined));
            console.log(isFalsy(null));
            console.log(isFalsy(0));
            console.log(isFalsy(NaN));
            console.log(isFalsy(''));

            console.log(isTruthy(true));
            // 빈 문자열이 아닌 문자열은 Truthy값이다.
            console.log(isTruthy('0'));
            console.log(isTruthy({}));
            console.log(isTruthy([]));
        }
        // #3.1 문자열 타입으로 변환
        {
            // 1. String 생성자 함수를 new 연산자 없이 호출하는 방법
            console.log('1. String 생성자 함수를 new 연산자 없이 호출하는 방법');
            // 숫자 타입 -> 문자열 타입
            console.log(String(1));
            console.log(String(NaN));
            console.log(String(Infinity));
            console.log(String(true));
            console.log(String(false));
            

            // 2. Object.prototype.toString 메서드를 사용하는 방법
            console.log('2. Object.prototype.toString 메서드를 사용하는 방법');
            // 숫자 타입 -> 문자열 타입
            console.log((1).toString());
            console.log((NaN).toString());
            console.log((Infinity).toString());
            console.log((true).toString());
            console.log((false).toString());

            // 3. 문자열 연결 연산자를 이용하는 방법
            console.log('3. 문자열 연결 연산자를 이용하는 방법');
            // 숫자 타입 -> 문자열 연결
            console.log(1 + '');
            console.log(NaN + '');
            console.log(Infinity + '');
            console.log(true + '');
            console.log(false + '');
        }

        // #3.2 숫자 타입으로 변환
        {
            // 1. NUmber 생성자 함수를 new연산자 없이 호출하는 방법
            console.log('1. NUmber 생성자 함수를 new연산자 없이 호출하는 방법');
            // 문자열 타입 -> 숫자 타입
            console.log(Number('0'));
            console.log(Number('-1'));
            console.log(Number('10.53'));
            // 불리언 타입 -> 숫자 타입
            console.log(Number(true));
            console.log(Number(false));

            // 2. parseInt, parseFloat 함수를 사용하는 방법(문자열만 변환 가능)
            console.log('2. parseInt, parseFloat 함수를 사용하는 방법(문자열만 변환 가능)');
            console.log(parseInt('0'));
            console.log(parseInt('-1'));
            console.log(parseFloat('10.53'));

            // 3. + 단항 연결 연산자를 이용하는 방법
            console.log('3. + 단항 연결 연산자를 이용하는 방법');
            // 문자열 타입 -> 숫자 타입
            console.log(+'0');
            console.log(+'-1');
            console.log(+'10.53');
            // 불리언 타입 -> 숫자 타입
            console.log(+true);
            console.log(+false);

            // 4. * 산술 연산자를 이용하는 방법
            console.log('4. * 산술 연산자를 이용하는 방법');
            // 문자열 타입 -> 숫자 타입
            console.log('0' * 1);
            console.log('-1' * 1);
            console.log('10.53' * 1);
            // 불리언 타입 -> 숫자 타입
            console.log(true * 1);
            console.log(false * 1);
        }

        // #3.3 불리언 타입으로 변환
        {
            // 1. Boolean 생성자 함수를 new 연산자 없이 호출하는 방법
            console.log('1. Boolean 생성자 함수를 new 연산자 없이 호출하는 방법');
            // 문자열 타입 -> 불리언 타입
            console.log(Boolean('x'));
            console.log(Boolean(''));
            console.log(Boolean('false'));
            // 숫자 타입 -> 불리언 타입
            console.log(Boolean(0)); // false
            console.log(Boolean(1)); // true
            console.log(Boolean(NaN)); // false
            console.log(Boolean(Infinity)); // true
            console.log(Boolean(null)); // false
            console.log(Boolean(undefined)); // false
            console.log(Boolean({})); // true
            console.log(Boolean([])); // true

            // 2. ! 부정 논리 연산자를 두번 사용하는 방법
            console.log('2. ! 부정 논리 연산자를 두번 사용하는 방법');
            // 문자열 타입 -> 불리언 타입
            console.log(!!('x'));
            console.log(!!(''));
            console.log(!!('false'));
            // 숫자 타입 -> 불리언 타입
            console.log(!!(0)); // false
            console.log(!!(1)); // true
            console.log(!!(NaN)); // false
            console.log(!!(Infinity)); // true
            console.log(!!(null)); // false
            console.log(!!(undefined)); // false
            console.log(!!({})); // true
            console.log(!!([])); // true
        }

        // 5. 단축 평가
        {
            console.log('Cat' && 'Dog');
            console.log('Cat' || 'Dog');

            // 논리합(||) 연산자
            console.log('Cat' || 'Dog');
            console.log(false || 'Dog');
            console.log('Cat' || false);

            // 논리곱(&&) 연산자
            console.log('Cat' && 'Dog');
            console.log(false && 'Dog');
            console.log('Cat' && false);

            // 단축 평가가 유용한 경우
            // 객체가 null인지 확인하고 프로퍼티를 참조할 때
            console.log('// 단축 평가가 유용한 경우\n// 객체가 null인지 확인하고 프로퍼티를 참조할 때');
            let elem = null;
            // console.log(elem.value);
            console.log(elem && elem.value);
            // 객체는 키(key)와 값(value)으로 구성된 프로퍼티(property)들의 집합이다. 만약 객체가 null인 경우, 객체의 프로퍼티를 참조하면 타입 에러(TypeError)가 발생한다. 이때 단축 평가를 사용하면 에러를 발생시키지 않는다.

            // 함수의 인수(argument)를 초기화할 때
            console.log('함수의 인수(argument)를 초기화할 때');
            function getStringLength(str) {
                str = str || '';
                return str.length;
            }
            console.log(getStringLength());
            console.log(getStringLength('hi'));

            // ES6의 매개변수 기본값 설정
            function getStringLength(str = '') {
                return str.length;
            }
            console.log(getStringLength());
            console.log(getStringLength('hi'));
            
        }

    </script>
</body>
</html>